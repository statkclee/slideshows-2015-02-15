<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0" />

    <title>데이터베이스 및 SQL</title>
    <meta name="author" content="Greg Wilson" />
    <!-- <meta name="narrator" content="Katy Huff" />
    <meta name="audio" content="img/00-voiceover.ogg" />
    <meta name="timings" content="img/00-timings.json" /> -->

    <script src="../js/deckjs-custom.js"></script>
    <script>includedeck(["../css/software-carpentry.css"],{});</script>
    <style type="text/css">
      .slide.title-slide h1 {padding-bottom: 0;} /* title is long... */
      a {text-decoration: underline;} /* make links clearer */
      pre {font-size: 75%;} /* make code blocks smaller */
      p.lesson {text-align: center; font-size: 120%; font-style: italic;}    
    </style>
  </head>
  <body>
  <div class="deck-container">

    <section class="slide title-slide" data-container-class="no-status">
        <h2 class="var-title"></h2>
        <h3> 04. 새로운 값 계산하기 </h2>
        <img class="logo" src="../img/software-carpentry-banner.png" alt="Software Carpentry Logo" />
    <aside class="notes">
    </aside>
      </section>

    <section class="slide" style="font-size:60%">
        <h2> 연습문제 1. </h2>
    <p>좀더 조사한 뒤에, Valentina Roerich는 염도를 퍼센티지(%)로 작성한 것을 알게되었다.
<code>Survey</code> 테이블에서 값을 100으로 나누어서 모든 염도 측정치를 반환하는 쿼리를 작성하세요.</p>
    </section>  

    <section class="slide" style="font-size:60%">
        <h2> 연습문제 1. 토론 </h2>
    <p>좀더 조사한 뒤에, Valentina Roerich는 염도를 퍼센티지(%)로 작성한 것을 알게되었다.
<code>Survey</code> 테이블에서 값을 100으로 나누어서 모든 염도 측정치를 반환하는 쿼리를 작성하세요.</p>
    <pre>
sqlite> select taken, person, quant, reading/100 from survey where person='roe'
and quant ='sal';
752|roe|sal|0.416
837|roe|sal|0.225      
      ---------------------------------------------------------------------------
sqlite> select taken, person, quant, reading/100 from survey where person='roe'
and quant ='sal' union select taken, person, quant, reading from survey where pe
rson != 'roe' or quant !='sal';
619|dyer|rad|9.82
619|dyer|sal|0.13
622|dyer|rad|7.8
622|dyer|sal|0.09
734|lake|sal|0.05
734|pb|rad|8.41
734|pb|temp|-21.5
735||temp|-26.0
735|pb|rad|7.22
751|lake|sal|0.1
751|pb|rad|4.35
751|pb|temp|-18.5
752|lake|rad|2.19
752|lake|sal|0.09
752|lake|temp|-16.0
752|roe|sal|0.416
837|lake|rad|1.46
837|lake|sal|0.21
837|roe|sal|0.225
844|roe|rad|11.25</pre>
    </section>  

    <section class="slide" style="font-size:60%">
        <h2> 연습문제 2. </h2>
 <p><code>union</code> 연산자는 두 쿼리의 결과를 조합한다.</p>
<pre class="in"><code>%%sqlite survey.db
select * from Person where ident=&#39;dyer&#39; union select * from Person where ident=&#39;roe&#39;;</code></pre>

<div class="out"><table>
<tr><td>dyer</td><td>William</td><td>Dyer</td></tr>
<tr><td>roe</td><td>Valentina</td><td>Roerich</td></tr>
</table></div>

<p><code>union</code>을 사용하여 앞선 도전과제에서 기술되어 수정된 Roerich가 측정한, Roerich만 측정한 염도 측정치의 통합 리스트를 생성하세요.
출력결과는 다음과 같아야 한다.</p>

<table>
  <tr> <td>619</td> <td>0.13</td> </tr>
  <tr> <td>622</td> <td>0.09</td> </tr>
  <tr> <td>734</td> <td>0.05</td> </tr>
  <tr> <td>751</td> <td>0.1</td> </tr>
  <tr> <td>752</td> <td>0.09</td> </tr>
  <tr> <td>752</td> <td>0.416</td> </tr>
  <tr> <td>837</td> <td>0.21</td> </tr>
  <tr> <td>837</td> <td>0.225</td> </tr>
</table>

     </section>  


    <section class="slide" style="font-size:60%">
        <h2> 연습문제 2. 토론 </h2>

<p><code>union</code>을 사용하여 앞선 도전과제에서 기술되어 수정된 Roerich가 측정한, Roerich만 측정한 염도 측정치의 통합 리스트를 생성하세요.
출력결과는 다음과 같아야 한다.</p>

<table>
  <tr> <td>619</td> <td>0.13</td> </tr>
  <tr> <td>622</td> <td>0.09</td> </tr>
  <tr> <td>734</td> <td>0.05</td> </tr>
  <tr> <td>751</td> <td>0.1</td> </tr>
  <tr> <td>752</td> <td>0.09</td> </tr>
  <tr> <td>752</td> <td>0.416</td> </tr>
  <tr> <td>837</td> <td>0.21</td> </tr>
  <tr> <td>837</td> <td>0.225</td> </tr>
</table>

  <pre>
sqlite> select taken, reading/100 from survey where person='roe' and quant ='sal' 
union select taken, reading from survey where quant ='sal' and person != 'roe';
619|0.13
622|0.09
734|0.05
751|0.1
752|0.09
752|0.416
837|0.21
837|0.225
  </pre>
     </section>  

    <section class="slide" style="font-size:60%">
        <h2> 연습문제 3. </h2>
<ol>
  <li><code>Visited</code> 테이블에 사이트 식별자는 &#39;-&#39;으로 구분되는 두 부분으로 구성되어 있다.</li>
</ol>

<pre class="in"><code>%%sqlite survey.db
select distinct site from Visited;</code></pre>

<div class="out"><table>
<tr><td>DR-1</td></tr>
<tr><td>DR-3</td></tr>
<tr><td>MSK-4</td></tr>
</table></div>

<p>몇몇 주요 사이트 식별자는 두 문자길이를 가지고 몇몇은 3문자길이를 가진다.
&quot;in string&quot; 함수 <code>instr(X, Y)</code>은 X 문자열에 문자열 Y가 첫번째 출현의 1-기반 인덱스를 반환하거나 
Y가 X에 존재하지 않으면 0 을 반환한다.
부분 문자열 함수 <code>substr(X, I)</code>은 인덱스 I에서 시작하는 문자열 X의 부분문자열을 반환한다.
상기 두 함수를 사용해서 유일한 주요 사이트 식별자를 생성하세요. (이 데이터에 대해서 작업된 리스트는 
&quot;DR&quot;과 &quot;MSK&quot;만 포함해야 한다.)</p>
     </section>  

    <section class="slide" style="font-size:60%">
        <h2> 연습문제 3. 토론</h2>
<ol>
  <li><code>Visited</code> 테이블에 사이트 식별자는 &#39;-&#39;으로 구분되는 두 부분으로 구성되어 있다.</li>
</ol>

<pre class="in"><code>%%sqlite survey.db
select distinct site from Visited;</code></pre>

<div class="out"><table>
<tr><td>DR-1</td></tr>
<tr><td>DR-3</td></tr>
<tr><td>MSK-4</td></tr>
</table></div>

<p>몇몇 주요 사이트 식별자는 두 문자길이를 가지고 몇몇은 3문자길이를 가진다.
&quot;in string&quot; 함수 <code>instr(X, Y)</code>은 X 문자열에 문자열 Y가 첫번째 출현의 1-기반 인덱스를 반환하거나 
Y가 X에 존재하지 않으면 0 을 반환한다.
부분 문자열 함수 <code>substr(X, I)</code>은 인덱스 I에서 시작하는 문자열 X의 부분문자열을 반환한다.
상기 두 함수를 사용해서 유일한 주요 사이트 식별자를 생성하세요. (이 데이터에 대해서 작업된 리스트는 
&quot;DR&quot;과 &quot;MSK&quot;만 포함해야 한다.)</p>
    <pre>
sqlite> select distinct substr(site,1,2) from visited where instr(site,"DR") 
union select distinct substr(site,1,3) from visited where instr(site,"MSK");
DR
MSK</pre>
     </section>
  </body>
</html>



